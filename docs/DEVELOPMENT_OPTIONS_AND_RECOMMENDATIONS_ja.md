# Residue 開発オプションと推奨案

## 0. 目的
- 未確定の開発論点を、`推奨案` と `選択肢` で先に固定し、実装停止を防ぐ。
- 本書は「まずこれで進める」ための意思決定メモ。

## 1. KPI/成功指標
推奨案:
- `継続率中心` で判断する。
- 最低指標: `D1`, `D7`, `平均周回数`, `7周到達率`, `改変ルート到達率`

選択肢:
- A: 売上中心（短期収益重視）
- B: 継続率中心（体験品質重視） ← 推奨
- C: UGC/共有中心（拡散重視）

採用基準:
- 現段階はゲーム性検証フェーズのため B を採用。

## 2. チュートリアル設計
推奨案:
- `1-2周` は説明を最小化し、操作だけ学ばせる。
- メタ説明は `3周以降` に段階表示。

選択肢:
- A: 初回に全説明
- B: 周回段階に応じて解放 ← 推奨
- C: 説明なしで完全探索

採用基準:
- 「最初は普通に見せる」方針との整合で B。

## 3. 難易度と魂ポイント経済
推奨案:
- 魂ポイントは `逓減` を入れる（同一行動の連続稼ぎ効率を下げる）。
- ジョブ解放コストは段階上昇。

選択肢:
- A: 線形成長
- B: 逓減 + 段階解放 ← 推奨
- C: ランダム報酬中心

採用基準:
- 長期周回でインフレを抑えるため B。

## 4. テスト戦略
推奨案:
- `分岐ロジック` と `セーブ互換` を最優先で自動テスト化。
- 高難度フラグは回帰テストを固定化。

選択肢:
- A: 手動テスト中心
- B: 主要ロジックのみ自動化 ← 推奨
- C: ほぼ全面自動化（初期コスト大）

採用基準:
- 開発速度とのバランスで B。

## 5. 配信/運用（CI/CD）
推奨案:
- `main` 直デプロイ禁止、`staging -> production` の2段階。
- データ更新は `feature flag` で段階解放。

選択肢:
- A: 手動ビルド配布
- B: 2段階パイプライン + フラグ運用 ← 推奨
- C: 多環境細分化（運用負荷大）

採用基準:
- 品質ゲートを守りつつ運用を単純化するため B。

## 6. 観測性（障害検知）
推奨案:
- 最低限 `クラッシュ率`, `API遅延`, `生成失敗率`, `キャッシュヒット率` を監視。

選択肢:
- A: ログのみ
- B: メトリクス + アラート ← 推奨
- C: フルトレーシング（後回し可）

採用基準:
- まず障害を見逃さないため B。

## 7. 法務/ストア準備
推奨案:
- 生成素材は台帳管理（ツール、プラン、生成日時、規約確認日）。
- ストア文言は「AI生成」を過度に前面化せず、ゲーム体験を主軸にする。

選択肢:
- A: 最終段階でまとめ対応
- B: 制作時から台帳運用 ← 推奨
- C: 外部監査を先行導入

採用基準:
- 後戻りコストを抑えるため B。

## 8. アクセシビリティ
推奨案:
- `文字サイズ3段階`, `時間制限緩和`, `SE字幕` をMVP後半で導入。

選択肢:
- A: リリース後対応
- B: MVP後半で最低限導入 ← 推奨
- C: 初期からフル対応（工数大）

採用基準:
- 実装コストと品質のバランスで B。

## 9. ローカライズ
推奨案:
- 日本語先行だが、文字列ID分離は最初から実施。

選択肢:
- A: 日本語直書き
- B: 文字列分離だけ先行 ← 推奨
- C: 多言語同時開発

採用基準:
- 将来拡張コストを最小化するため B。

## 10. バックアップ/復旧
推奨案:
- セーブは `世代管理`（最新 + 1世代前）。
- サーバーDBは日次スナップショット。

選択肢:
- A: 単一セーブのみ
- B: 世代管理 + 日次バックアップ ← 推奨
- C: 高頻度バックアップ（コスト大）

採用基準:
- 破損時の実害を最小化するため B。

## 11. 直近で確定する順序（実行順）
1. KPI定義と計測イベントID確定
2. 分岐/セーブのテスト設計
3. CI/CDとfeature flag運用開始
4. 法務台帳テンプレ導入
5. アクセシビリティ最小要件を実装チケット化

## 12. 現時点の推奨セット（暫定採用）
- KPI: `継続率中心`
- チュートリアル: `段階解放`
- 経済: `逓減 + 段階解放`
- テスト: `主要ロジック自動化`
- 運用: `staging -> production`
- 観測: `メトリクス + アラート`
- 法務: `制作時から台帳`
- アクセシビリティ: `MVP後半で最低限導入`
- ローカライズ: `文字列分離先行`
- 復旧: `世代管理 + 日次バックアップ`
