# Residue 開発進捗

## Phase 1: コアループ強化 ✅ (2026-02-16)
コミット: `0c03432`
- [x] PlayerRunState（HP, ゴールド, 現在ノード, run_tags, 統計）
- [x] ノードベースダンジョン探索（各ワールド12ノード）
- [x] ターン制戦闘システム（攻撃/防御/逃走）
- [x] イベントタイプ分岐（explore/battle/dialogue）
- [x] 魂価値計算（深度×2 + 討伐×3 + 発見×5 + クリア+10）
- [x] コンテンツ拡充（敵10体、イベント16個）

## Phase 2: 継承システム ✅ (2026-02-16)
コミット: `0c88fcf`
- [x] 因果タグ14種（merciful, cruel, curious等）
- [x] 記憶フラグ（永続、sets_flag/requires_flag/excludes_flag）
- [x] 継承3択システム（InheritanceScreen）
- [x] 条件付きイベント（タグ/フラグ/真実段階で分岐）
- [x] 真実段階（world_truth_stages、Residue開示シーン含む）

## Phase 3: ジョブ & 世界横断 ✅ (2026-02-16)
- [x] ジョブデータ構造（data/jobs/jobs.json）
- [x] ジョブ選択画面（JobSelectScreen.tscn/gd）
- [x] ジョブ4種実装
  - 共通: 放浪者（逃走率UP）、学者（発見ボーナス+50%）
  - 中世: 騎士（HP+20/攻+3/防+2、防御70%軽減）
  - 未来: 機械兵（HP+10/攻+5、オーバークロック）
- [x] ジョブ解放システム（魂価値消費）
- [x] 他世界ジョブ持ち込み（foreign_job フラグ）
- [x] 他世界ジョブ差分イベント（各ワールド3個）
- [x] クロスワールド因果リンク（data/cross_links/cross_links.json）
  - medieval→future: 量子回路（司教討伐で取得→未来で配達→真実開示）
  - future→medieval: 古代暗号（コアログ読取で取得→中世修道士に配達→真実開示）
- [x] リンク成立時: 真実段階+1、特殊会話、フラグ設定
- [x] Main.gd: WorldSelect → JobSelect → Run フロー

## Phase 4: 演出 & UI（未着手）
- [ ] テキスト演出（フェード、SE指定）
- [ ] 裏の段階開示演出
- [ ] BGM/SE統合
- [ ] バックエンド連携（動的増殖）

---

## MVP完了条件（GDDより）
- [x] 世界2種プレイ可能
- [x] 各世界にダンジョン（10-15ノード）
- [x] ボス各1
- [x] ジョブ4種（共通2 + 世界固有2）
- [x] クロスリンク2本
- [x] 真実開示2段階
- [x] 周回継承（魂価値、ジョブ解放、記憶フラグ）

**MVP機能要件 全達成！** 🎉
